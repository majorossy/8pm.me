<?xml version="1.0"?>
<!--
/**
 * ArchiveDotOrg Core Module - Dependency Injection Configuration
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">

    <!-- Logger Configuration -->
    <type name="ArchiveDotOrg\Core\Logger\Handler">
        <arguments>
            <argument name="filesystem" xsi:type="object">Magento\Framework\Filesystem\Driver\File</argument>
        </arguments>
    </type>

    <type name="ArchiveDotOrg\Core\Logger\Logger">
        <arguments>
            <argument name="name" xsi:type="string">archivedotorg</argument>
            <argument name="handlers" xsi:type="array">
                <item name="system" xsi:type="object">ArchiveDotOrg\Core\Logger\Handler</item>
            </argument>
        </arguments>
    </type>

    <!-- Interface Preferences (Service Contracts) -->
    <preference for="ArchiveDotOrg\Core\Api\Data\ShowInterface"
                type="ArchiveDotOrg\Core\Model\Data\Show"/>

    <preference for="ArchiveDotOrg\Core\Api\Data\TrackInterface"
                type="ArchiveDotOrg\Core\Model\Data\Track"/>

    <preference for="ArchiveDotOrg\Core\Api\Data\ImportResultInterface"
                type="ArchiveDotOrg\Core\Model\Data\ImportResult"/>

    <preference for="ArchiveDotOrg\Core\Api\ArchiveApiClientInterface"
                type="ArchiveDotOrg\Core\Model\ArchiveApiClient"/>

    <preference for="ArchiveDotOrg\Core\Api\AttributeOptionManagerInterface"
                type="ArchiveDotOrg\Core\Model\AttributeOptionManager"/>

    <preference for="ArchiveDotOrg\Core\Api\TrackImporterInterface"
                type="ArchiveDotOrg\Core\Model\TrackImporter"/>

    <preference for="ArchiveDotOrg\Core\Api\ShowImporterInterface"
                type="ArchiveDotOrg\Core\Model\ShowImporter"/>

    <preference for="ArchiveDotOrg\Core\Api\ProgressTrackerInterface"
                type="ArchiveDotOrg\Core\Model\ProgressTracker"/>

    <preference for="ArchiveDotOrg\Core\Api\ImageImportServiceInterface"
                type="ArchiveDotOrg\Core\Model\ImageImportService"/>

    <preference for="ArchiveDotOrg\Core\Api\BulkProductImporterInterface"
                type="ArchiveDotOrg\Core\Model\BulkProductImporter"/>

    <preference for="ArchiveDotOrg\Core\Api\CategoryAssignmentServiceInterface"
                type="ArchiveDotOrg\Core\Model\CategoryAssignmentService"/>

    <preference for="ArchiveDotOrg\Core\Api\ImportManagementInterface"
                type="ArchiveDotOrg\Core\Model\ImportManagement"/>

    <preference for="ArchiveDotOrg\Core\Api\Data\ImportJobInterface"
                type="ArchiveDotOrg\Core\Model\Data\ImportJob"/>

    <preference for="ArchiveDotOrg\Core\Api\Data\CollectionInfoInterface"
                type="ArchiveDotOrg\Core\Model\Data\CollectionInfo"/>

    <preference for="ArchiveDotOrg\Core\Api\ImportPublisherInterface"
                type="ArchiveDotOrg\Core\Model\Queue\ImportPublisher"/>

    <!-- Console Commands -->
    <type name="Magento\Framework\Console\CommandList">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="archivedotorg_import_shows" xsi:type="object">ArchiveDotOrg\Core\Console\Command\ImportShowsCommand</item>
                <item name="archivedotorg_sync_albums" xsi:type="object">ArchiveDotOrg\Core\Console\Command\SyncAlbumsCommand</item>
                <item name="archivedotorg_status" xsi:type="object">ArchiveDotOrg\Core\Console\Command\StatusCommand</item>
                <item name="archivedotorg_cleanup_products" xsi:type="object">ArchiveDotOrg\Core\Console\Command\CleanupProductsCommand</item>
                <item name="archivedotorg_refresh_products" xsi:type="object">ArchiveDotOrg\Core\Console\Command\RefreshProductsCommand</item>
            </argument>
        </arguments>
    </type>

</config>
