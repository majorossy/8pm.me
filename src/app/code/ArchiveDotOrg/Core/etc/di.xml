<?xml version="1.0"?>
<!--
/**
 * ArchiveDotOrg Core Module - Dependency Injection Configuration
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">

    <!-- Logger Configuration -->
    <type name="ArchiveDotOrg\Core\Logger\Handler">
        <arguments>
            <argument name="filesystem" xsi:type="object">Magento\Framework\Filesystem\Driver\File</argument>
        </arguments>
    </type>

    <type name="ArchiveDotOrg\Core\Logger\Logger">
        <arguments>
            <argument name="name" xsi:type="string">archivedotorg</argument>
            <argument name="handlers" xsi:type="array">
                <item name="system" xsi:type="object">ArchiveDotOrg\Core\Logger\Handler</item>
            </argument>
        </arguments>
    </type>

    <!-- Interface Preferences (Service Contracts) -->
    <preference for="ArchiveDotOrg\Core\Api\Data\ShowInterface"
                type="ArchiveDotOrg\Core\Model\Data\Show"/>

    <preference for="ArchiveDotOrg\Core\Api\Data\TrackInterface"
                type="ArchiveDotOrg\Core\Model\Data\Track"/>

    <preference for="ArchiveDotOrg\Core\Api\Data\ImportResultInterface"
                type="ArchiveDotOrg\Core\Model\Data\ImportResult"/>

    <preference for="ArchiveDotOrg\Core\Api\ArchiveApiClientInterface"
                type="ArchiveDotOrg\Core\Model\ArchiveApiClient"/>

    <preference for="ArchiveDotOrg\Core\Api\AttributeOptionManagerInterface"
                type="ArchiveDotOrg\Core\Model\AttributeOptionManager"/>

    <preference for="ArchiveDotOrg\Core\Api\TrackImporterInterface"
                type="ArchiveDotOrg\Core\Model\TrackImporter"/>

    <preference for="ArchiveDotOrg\Core\Api\ShowImporterInterface"
                type="ArchiveDotOrg\Core\Model\ShowImporter"/>

    <preference for="ArchiveDotOrg\Core\Api\ProgressTrackerInterface"
                type="ArchiveDotOrg\Core\Model\ProgressTracker"/>

    <preference for="ArchiveDotOrg\Core\Api\ImageImportServiceInterface"
                type="ArchiveDotOrg\Core\Model\ImageImportService"/>

    <preference for="ArchiveDotOrg\Core\Api\BulkProductImporterInterface"
                type="ArchiveDotOrg\Core\Model\BulkProductImporter"/>

    <preference for="ArchiveDotOrg\Core\Api\CategoryAssignmentServiceInterface"
                type="ArchiveDotOrg\Core\Model\CategoryAssignmentService"/>

    <preference for="ArchiveDotOrg\Core\Api\ImportManagementInterface"
                type="ArchiveDotOrg\Core\Model\ImportManagement"/>

    <preference for="ArchiveDotOrg\Core\Api\Data\ImportJobInterface"
                type="ArchiveDotOrg\Core\Model\Data\ImportJob"/>

    <preference for="ArchiveDotOrg\Core\Api\Data\CollectionInfoInterface"
                type="ArchiveDotOrg\Core\Model\Data\CollectionInfo"/>

    <preference for="ArchiveDotOrg\Core\Api\ImportPublisherInterface"
                type="ArchiveDotOrg\Core\Model\Queue\ImportPublisher"/>

    <preference for="ArchiveDotOrg\Core\Api\MetadataDownloaderInterface"
                type="ArchiveDotOrg\Core\Model\MetadataDownloader"/>

    <preference for="ArchiveDotOrg\Core\Api\TrackPopulatorServiceInterface"
                type="ArchiveDotOrg\Core\Model\TrackPopulatorService"/>

    <preference for="ArchiveDotOrg\Core\Api\AlbumArtworkServiceInterface"
                type="ArchiveDotOrg\Core\Model\AlbumArtworkService"/>

    <preference for="ArchiveDotOrg\Core\Api\LockServiceInterface"
                type="ArchiveDotOrg\Core\Model\LockService"/>

    <preference for="ArchiveDotOrg\Core\Api\ArtistConfigValidatorInterface"
                type="ArchiveDotOrg\Core\Model\ArtistConfigValidator"/>

    <preference for="ArchiveDotOrg\Core\Api\TrackMatcherServiceInterface"
                type="ArchiveDotOrg\Core\Model\TrackMatcherService"/>

    <preference for="ArchiveDotOrg\Core\Api\Data\MatchResultInterface"
                type="ArchiveDotOrg\Core\Model\Data\MatchResult"/>

    <preference for="ArchiveDotOrg\Core\Api\StringNormalizerInterface"
                type="ArchiveDotOrg\Core\Model\StringNormalizer"/>

    <preference for="ArchiveDotOrg\Core\Api\ArtistConfigLoaderInterface"
                type="ArchiveDotOrg\Core\Model\ArtistConfigLoader"/>

    <!-- Console Commands -->
    <type name="Magento\Framework\Console\CommandList">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="archivedotorg_import_shows" xsi:type="object">ArchiveDotOrg\Core\Console\Command\ImportShowsCommand</item>
                <item name="archivedotorg_sync_albums" xsi:type="object">ArchiveDotOrg\Core\Console\Command\SyncAlbumsCommand</item>
                <item name="archivedotorg_status" xsi:type="object">ArchiveDotOrg\Core\Console\Command\StatusCommand</item>
                <item name="archivedotorg_cleanup_products" xsi:type="object">ArchiveDotOrg\Core\Console\Command\CleanupProductsCommand</item>
                <item name="archivedotorg_refresh_products" xsi:type="object">ArchiveDotOrg\Core\Console\Command\RefreshProductsCommand</item>
                <item name="archivedotorg_download_metadata" xsi:type="object">ArchiveDotOrg\Core\Console\Command\DownloadMetadataCommand</item>
                <item name="archivedotorg_populate_tracks" xsi:type="object">ArchiveDotOrg\Core\Console\Command\PopulateTracksCommand</item>
                <item name="archivedotorg_download_album_art" xsi:type="object">ArchiveDotOrg\Core\Console\Command\DownloadAlbumArtCommand</item>
                <item name="archivedotorg_update_category_artwork" xsi:type="object">ArchiveDotOrg\Core\Console\Command\UpdateCategoryArtworkCommand</item>
                <item name="archivedotorg_set_artwork_url" xsi:type="object">ArchiveDotOrg\Core\Console\Command\SetArtworkUrlCommand</item>
                <item name="archivedotorg_retry_missing_artwork" xsi:type="object">ArchiveDotOrg\Core\Console\Command\RetryMissingArtworkCommand</item>
            </argument>
        </arguments>
    </type>

</config>
